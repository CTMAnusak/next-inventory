# ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢: ‡∏Å‡∏≤‡∏£ Snapshot ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ üì∏

## ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£? ‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á snapshot ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? 
> ‡∏ñ‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‡∏™‡∏†‡∏≤‡∏û ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô 
> ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡πâ‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏ô‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏ñ‡∏∂‡∏á‡πÅ‡∏°‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß?

---

## ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏±‡πâ‡∏ô ‚úÖ

1. **‡πÉ‡∏ä‡πà ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Snapshot ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ** 
2. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏≠‡∏µ‡∏Å** (frozen ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö)
3. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥** (‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå, ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, ‡∏™‡∏†‡∏≤‡∏û, ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô)

---

## ‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (User Deletion Flow)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥:

```
1. ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ"
   ‚Üì
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
   ‚Üì
3. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏° Snapshot
   ‚Üì
4. Snapshot #1: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á "DeletedUsers" Collection
   ‚Üì
5. Snapshot #2: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ó‡∏∏‡∏Å Logs ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
   - IssueLog (‡∏á‡∏≤‡∏ô‡πÅ‡∏à‡πâ‡∏á IT)
   - RequestLog (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å)
   - ReturnLog (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô)
   - TransferLog (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢)
   ‚Üì
6. ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
   ‚Üì
7. ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô ‚úÖ
```

---

## ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

### 1. API Endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
**‡πÑ‡∏ü‡∏•‡πå:** `src/app/api/admin/users/[id]/route.ts` (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 238-390)

```typescript
export async function DELETE(request, { params }) {
  // ... ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ...
  
  if (userOwnedItems.length > 0) {
    // ‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ - ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Å‡πà‡∏≠‡∏ô
    return NextResponse.json({ 
      error: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ',
      message: `‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå ${userOwnedItems.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏∑‡∏ô‡∏Å‡πà‡∏≠‡∏ô`
    });
  } else {
    // ‚úÖ ‡∏•‡∏ö‡πÑ‡∏î‡πâ - ‡πÄ‡∏£‡∏¥‡πà‡∏° Snapshot
    
    // üì∏ Snapshot #1: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• User ‡πÉ‡∏ô DeletedUsers
    await DeletedUsers.findOneAndUpdate(
      { userMongoId: userToDelete._id.toString() },
      {
        user_id: userToDelete.user_id,
        firstName: userToDelete.firstName,
        lastName: userToDelete.lastName,
        nickname: userToDelete.nickname,
        department: userToDelete.department,
        office: userToDelete.office,
        phone: userToDelete.phone,
        email: userToDelete.email,
        deletedAt: new Date()
      },
      { upsert: true }
    );
    
    // üì∏ Snapshot #2: ‡πÄ‡∏Å‡πá‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Logs ‡∏ó‡∏∏‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    const { snapshotUserBeforeDelete } = await import('@/lib/snapshot-helpers');
    await snapshotUserBeforeDelete(userToDelete.user_id);
    
    // üóëÔ∏è ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    await User.findByIdAndDelete(id);
    
    return NextResponse.json({ message: '‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß' });
  }
}
```

### 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Snapshot Helpers
**‡πÑ‡∏ü‡∏•‡πå:** `src/lib/snapshot-helpers.ts` (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 203-245)

```typescript
export async function snapshotUserBeforeDelete(userId: string) {
  // Snapshot Equipment Logs (RequestLog, ReturnLog, TransferLog)
  const equipmentResults = await snapshotEquipmentLogsBeforeUserDelete(userId);
  
  // Snapshot IssueLog
  const issueResults = await snapshotIssueLogsBeforeUserDelete(userId);
  
  console.log(`‚úÖ Snapshot completed for user ${userId}:`);
  console.log(`   - RequestLogs: ${equipmentResults.requestLogs.modifiedCount}`);
  console.log(`   - ReturnLogs: ${equipmentResults.returnLogs.modifiedCount}`);
  console.log(`   - TransferLogs: ${equipmentResults.transferLogs.modifiedCount}`);
  console.log(`   - IssueLogs (Requester): ${issueResults.requester.modifiedCount}`);
  console.log(`   - IssueLogs (Admin): ${issueResults.admin.modifiedCount}`);
  
  return { success: true, totalModified, equipment, issues };
}
```

**‡πÑ‡∏ü‡∏•‡πå:** `src/lib/equipment-snapshot-helpers.ts` (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 75-237)

```typescript
// Snapshot RequestLog: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
export async function snapshotRequestLogsBeforeUserDelete(userId) {
  await RequestLog.updateMany(
    { approvedBy: userId },
    { $set: { approvedByName: userName } }
  );
  
  await RequestLog.updateMany(
    { rejectedBy: userId },
    { $set: { rejectedByName: userName } }
  );
}

// Snapshot ReturnLog: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô
export async function snapshotReturnLogsBeforeUserDelete(userId) {
  const returnLogs = await ReturnLog.find({ 'items.approvedBy': userId });
  
  for (const log of returnLogs) {
    log.items = log.items.map(item => {
      if (item.approvedBy === userId) {
        return { ...item, approvedByName: userName };
      }
      return item;
    });
    await log.save();
  }
}

// Snapshot TransferLog: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÇ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
export async function snapshotTransferLogsBeforeUserDelete(userId) {
  await TransferLog.updateMany(
    { 'fromOwnership.userId': userId },
    { $set: { 'fromOwnership.userName': userName } }
  );
  
  await TransferLog.updateMany(
    { 'toOwnership.userId': userId },
    { $set: { 'toOwnership.userName': userName } }
  );
  
  await TransferLog.updateMany(
    { processedBy: userId },
    { $set: { processedByName: userName } }
  );
  
  await TransferLog.updateMany(
    { approvedBy: userId },
    { $set: { approvedByName: userName } }
  );
}

// Snapshot IssueLog: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô
async function snapshotIssueLogsBeforeUserDelete(userId) {
  await IssueLog.updateMany(
    { requester: userId },
    { $set: { requesterName: userName } }
  );
  
  await IssueLog.updateMany(
    { assignedTo: userId },
    { $set: { assignedToName: userName } }
  );
}
```

---

## ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ | ‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ | ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? |
|--------------|-------------|-------------|------------------|
| **‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (requesterName, approvedByName)** | ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á Users | Snapshot (frozen) | ‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï |
| **‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (itemName)** | ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å InventoryItem | Snapshot + ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ | ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ |
| **‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà (categoryName)** | ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å InventoryConfig | Snapshot + ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ | ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ |
| **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (statusName)** | ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å InventoryConfig | Snapshot + ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ | ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ |
| **‡∏™‡∏†‡∏≤‡∏û (conditionName)** | ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å InventoryConfig | Snapshot + ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ | ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ |
| **‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô (approvedByName)** | ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á Users | ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á Users | ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ |

---

## ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏à‡∏£‡∏¥‡∏á

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå: ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ "‡∏ä‡∏∏‡∏ï‡∏¥‡∏°‡∏ì‡∏ë‡∏ô‡πå ‡∏≠‡∏ô‡∏∏‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå (‡πÅ‡∏≠‡∏°‡∏õ‡πå)"

#### **‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö:**

**‡∏ï‡∏≤‡∏£‡∏≤‡∏á RequestLog:**
```javascript
{
  _id: "req_001",
  requester: "USER1760941679483263",
  requesterSnapshot: {
    fullName: "‡∏ä‡∏∏‡∏ï‡∏¥‡∏°‡∏ì‡∏ë‡∏ô‡πå ‡∏≠‡∏ô‡∏∏‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå",
    nickname: "‡πÅ‡∏≠‡∏°‡∏õ‡πå",
    department: "Web",
    office: "Rasa One",
    phone: "0834294154"
  },
  approvedBy: "ADMIN1756103604440",
  approvedByName: null,  // üî¥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å snapshot
  items: [
    {
      itemName: "HP one 1",
      category: "Laptop",
      categoryId: "cat_laptop",
      statusOnRequest: "status_available",
      statusOnRequestName: null,  // üî¥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å snapshot
      conditionOnRequest: "condition_good",
      conditionOnRequestName: null  // üî¥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å snapshot
    }
  ]
}
```

#### **‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏•‡∏ö (Automatic Snapshot):**

```
üì∏ Starting snapshot for user USER1760941679483263...
‚úÖ Snapshot completed for user USER1760941679483263:
   - RequestLogs: 1
   - ReturnLogs: 1
   - TransferLogs: 0
   - IssueLogs (Requester): 1
   - IssueLogs (Admin): 0
   - Total: 3 records
```

#### **‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö:**

**‡∏ï‡∏≤‡∏£‡∏≤‡∏á RequestLog:**
```javascript
{
  _id: "req_001",
  requester: "USER1760941679483263",  // ‚ùå User ID ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà (‡πÄ‡∏õ‡πá‡∏ô reference)
  requesterSnapshot: {
    fullName: "‡∏ä‡∏∏‡∏ï‡∏¥‡∏°‡∏ì‡∏ë‡∏ô‡πå ‡∏≠‡∏ô‡∏∏‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå",  // ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Snapshot ‡πÄ‡∏î‡∏¥‡∏° (frozen)
    nickname: "‡πÅ‡∏≠‡∏°‡∏õ‡πå",
    department: "Web",
    office: "Rasa One",
    phone: "0834294154"
  },
  approvedBy: "ADMIN1756103604440",
  approvedByName: "Admin AD",  // ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ (‡∏ñ‡πâ‡∏≤ Admin ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà)
  items: [
    {
      itemName: "HP one 1",  // ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
      category: "Laptop",  // ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
      categoryId: "cat_laptop",
      statusOnRequest: "status_available",
      statusOnRequestName: "‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",  // ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
      conditionOnRequest: "condition_good",
      conditionOnRequestName: "‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ"  // ‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏†‡∏≤‡∏û
    }
  ]
}
```

---

## ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

### ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ:

#### 1. **‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (itemName)**
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô RequestLog/ReturnLog ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:**
```typescript
// src/lib/equipment-snapshot-helpers.ts
export async function snapshotItemNameBeforeDelete(masterId: string)
```

#### 2. **‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà (categoryName)**
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏ô Config ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô Logs ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:**
```typescript
// src/lib/equipment-snapshot-helpers.ts
export async function snapshotCategoryConfigBeforeChange(categoryId, newName)
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```javascript
// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà "Laptop" ‚Üí "Notebook"
await snapshotCategoryConfigBeforeChange('cat_laptop', 'Notebook');

// ‚úÖ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡∏ó‡∏∏‡∏Å RequestLog/ReturnLog/TransferLog ‡∏ó‡∏µ‡πà‡∏°‡∏µ categoryId='cat_laptop'
//    ‡∏à‡∏∞‡∏°‡∏µ category ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÄ‡∏õ‡πá‡∏ô "Notebook"
```

#### 3. **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (statusName)**
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ô Config ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô Logs ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:**
```typescript
// src/lib/equipment-snapshot-helpers.ts
export async function snapshotStatusConfigBeforeChange(statusId, newName)
```

#### 4. **‡∏™‡∏†‡∏≤‡∏û (conditionName)**
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏†‡∏≤‡∏û‡πÉ‡∏ô Config ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô Logs ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:**
```typescript
// src/lib/equipment-snapshot-helpers.ts
export async function snapshotConditionConfigBeforeChange(conditionId, newName)
```

#### 5. **‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô**
‡∏ñ‡πâ‡∏≤ Admin ‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö ‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```javascript
// Admin AD ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å ‚Üí Admin AD ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö AD"
// ‚úÖ approvedByName ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÄ‡∏õ‡πá‡∏ô "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö AD"

// ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤ requester ‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß
// ‚ùå requesterSnapshot.fullName ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï (frozen)
```

---

### ‚ùå ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï:

#### 1. **‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö (requesterName, approvedByName)**
‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö (frozen)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```javascript
// ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ "‡∏ä‡∏∏‡∏ï‡∏¥‡∏°‡∏ì‡∏ë‡∏ô‡πå ‡∏≠‡∏ô‡∏∏‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå" ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß
// ‚ùå requesterSnapshot.fullName ‡∏à‡∏∞‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô "‡∏ä‡∏∏‡∏ï‡∏¥‡∏°‡∏ì‡∏ë‡∏ô‡πå ‡∏≠‡∏ô‡∏∏‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå" ‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ
// ‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
```

---

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö: `test-user-deletion-snapshot.js`

‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
1. ‚úÖ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. ‚úÖ ‡∏°‡∏µ Snapshot ‡πÉ‡∏ô DeletedUsers ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. ‚úÖ ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Logs ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
4. ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ñ‡∏π‡∏Å Snapshot ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ:**
```bash
node test-user-deletion-snapshot.js
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
```
================================================================================
üìã ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: USER1760941679483263
================================================================================

‚úÖ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
   ‡∏ä‡∏∑‡πà‡∏≠: ‡∏ä‡∏∏‡∏ï‡∏¥‡∏°‡∏ì‡∏ë‡∏ô‡πå ‡∏≠‡∏ô‡∏∏‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå (‡πÅ‡∏≠‡∏°‡∏õ‡πå)
   ‡πÅ‡∏ú‡∏ô‡∏Å: Web
   ‡∏™‡∏≤‡∏Ç‡∏≤: Rasa One
   ‡πÄ‡∏ö‡∏≠‡∏£‡πå: 0834294154
   ‡∏≠‡∏µ‡πÄ‡∏°‡∏•: chutimon.a@vsqclinic.com

================================================================================
üìä ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Logs ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
================================================================================

1Ô∏è‚É£  ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏á‡∏≤‡∏ô IT (IssueLog):
   ‚úÖ ‡∏û‡∏ö 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

2Ô∏è‚É£  ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (RequestLog):
   ‚úÖ ‡∏û‡∏ö 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

3Ô∏è‚É£  ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (ReturnLog):
   ‚úÖ ‡∏û‡∏ö 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
```

---

## ‡∏™‡∏£‡∏∏‡∏õ üéØ

### ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:

| ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° | ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö |
|-------|-------|
| ‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á snapshot ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? | ‚úÖ **‡πÉ‡∏ä‡πà** ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á snapshot ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö |
| ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? | ‚ùå **‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï** (frozen ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö) |
| ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? | ‚úÖ **‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ** |
| ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? | ‚úÖ **‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ** |
| ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? | ‚úÖ **‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ** |
| ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏†‡∏≤‡∏û‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? | ‚úÖ **‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ** |
| ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? | ‚úÖ **‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ** (‡∏ñ‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö) |

### ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:
1. **User Deletion Snapshot** = ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Logs ‡∏ó‡∏∏‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á (frozen)
2. **Config/Equipment Snapshot** = ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á Config ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
3. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö** = ‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏≠‡∏µ‡∏Å (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß)
4. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∑‡πà‡∏ô‡πÜ** = ‡∏¢‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥ (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ Snapshot Function ‡πÅ‡∏¢‡∏Å‡∏≠‡∏¥‡∏™‡∏£‡∏∞)

---

## ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á

1. `src/app/api/admin/users/[id]/route.ts` - API Endpoint ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
2. `src/lib/snapshot-helpers.ts` - User Snapshot Functions
3. `src/lib/equipment-snapshot-helpers.ts` - Config/Equipment Snapshot Functions
4. `BRANCH_USER_SNAPSHOT_VERIFICATION.md` - ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Snapshot
5. `POPULATE_SNAPSHOT_SYSTEM_UPGRADE.md` - ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏ö Snapshot
6. `SNAPSHOT_SYSTEM_COMPLETE_GUIDE.md` - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö Snapshot ‡πÅ‡∏ö‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

---

**‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠:** 20 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568  
**‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:** 1.0.0

