# ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏∞‡∏ö‡∏ö Snapshot - ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°

## ‚úÖ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

### 1. Environment Variables ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß

‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô `.env.local`:
```env
SNAPSHOT_SECRET_KEY=my-super-secret-snapshort-key-2025-vsq-clinic  # ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 15
VERCEL_SNAPSHOT_SECRET_KEY=my-super-secret-vercel-key-2025-vsq-clinic  # ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 16
```

### 2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 0 ‡πÑ‡∏î‡πâ

‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏°‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô 0:
- `totalInventoryItems: 0`
- `totalInventoryCount: 0`  
- `lowStockItems: 0`
- `itemDetails: []` (array ‡∏ß‡πà‡∏≤‡∏á)

‡πÄ‡∏û‡∏£‡∏≤‡∏∞ snapshot ‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### 3. ‡∏ñ‡πâ‡∏≤ masterId ‡∏´‡∏£‡∏∑‡∏≠ itemName ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö

#### üéØ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö Snapshot (Self-Contained)

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ snapshot ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á**:

```typescript
itemDetails: [
  {
    // ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (optional - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö lookup ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)
    masterId: "abc123",
    
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Snapshot (‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á)
    itemName: "‡πÄ‡∏°‡∏≤‡∏™‡πå Logitech",         // ‡∏ä‡∏∑‡πà‡∏≠ ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô
    categoryId: "cat_001",
    categoryName: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå",  // üÜï ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô
    
    // ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
    totalQuantity: 10,
    availableQuantity: 8,
    userOwnedQuantity: 2,
    isLowStock: false
  }
]
```

#### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ

**A. ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (Re-snapshot)**
```javascript
// Snapshot ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°
{
  year: 2568,
  month: 10,
  itemDetails: [{ itemName: "‡πÄ‡∏°‡∏≤‡∏™‡πå", categoryName: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏≠‡∏°‡∏Ø" }]
}

// Re-snapshot ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 15 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
// ‚Üí ‡∏ó‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏° (upsert: true)
{
  year: 2568,
  month: 10,
  itemDetails: [{ itemName: "‡πÄ‡∏°‡∏≤‡∏™‡πå G502", categoryName: "Peripheral" }]
}
```

**B. ‡∏Ñ‡∏ô‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô)**
```javascript
// Snapshot ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568
{
  year: 2568,
  month: 10,
  itemDetails: [
    { 
      masterId: "abc123",
      itemName: "‡πÄ‡∏°‡∏≤‡∏™‡πå Logitech",
      categoryName: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå"
    }
  ]
}

// ‡∏•‡∏ö item ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 5 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô

// Snapshot ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568
{
  year: 2568,
  month: 11,
  itemDetails: [
    // ‡πÑ‡∏°‡πà‡∏°‡∏µ "‡πÄ‡∏°‡∏≤‡∏™‡πå" ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß
  ]
}

// ‚úÖ Snapshot ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°‡∏¢‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
// ‚úÖ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤ master ‡∏´‡∏£‡∏∑‡∏≠ category config
```

**C. ‡∏ñ‡πâ‡∏≤ Item ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö**
```javascript
// Snapshot ‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö
{
  masterId: "abc123",
  itemName: "‡πÄ‡∏°‡∏≤‡∏™‡πå Logitech",
  categoryName: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå"
}

// ‡∏•‡∏ö InventoryMaster ‡πÅ‡∏•‡∏∞ Category

// ‚úÖ Snapshot ‡∏¢‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å:
// - itemName (‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ)
// - categoryName (‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ)
// - masterId (‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
```

**D. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠**
```javascript
// Snapshot ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°
{
  masterId: "abc123",
  itemName: "‡πÄ‡∏°‡∏≤‡∏™‡πå Logitech",
  categoryName: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå"
}

// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ item ‡πÅ‡∏•‡∏∞ category

// Snapshot ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô
{
  masterId: "abc123",  // masterId ‡πÄ‡∏î‡∏¥‡∏°
  itemName: "‡πÄ‡∏°‡∏≤‡∏™‡πå Logitech G502",
  categoryName: "Peripheral Devices"
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•:
// - Snapshot ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° ‚Üí ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏° (‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå)
// - Snapshot ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô ‚Üí ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà
// - ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‚Üí ‡πÉ‡∏ä‡πâ populateSnapshotItemNames()
```

## üìä ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Snapshot

### Model Definition

```typescript
interface IInventorySnapshot {
  year: number;              // ‡∏õ‡∏µ ‡∏û.‡∏®.
  month: number;             // ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (1-12)
  snapshotDate: Date;        // ‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
  
  // ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏ß‡∏°
  totalInventoryItems: number;
  totalInventoryCount: number;
  lowStockItems: number;
  
  // ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞ item
  itemDetails: [
    {
      masterId?: string;        // ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á InventoryMaster._id
      itemName: string;         // ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô
      categoryId: string;       // ID ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
      categoryName: string;     // ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô
      totalQuantity: number;
      availableQuantity: number;
      userOwnedQuantity: number;
      isLowStock: boolean;
    }
  ];
  
  createdAt: Date;
  updatedAt: Date;
}
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á

```json
{
  "_id": "69081703faa98d17bfc4d3b5",
  "year": 2568,
  "month": 10,
  "snapshotDate": "2025-10-31T16:59:59.000Z",
  "totalInventoryItems": 10,
  "totalInventoryCount": 50,
  "lowStockItems": 2,
  "itemDetails": [
    {
      "masterId": "master_test_001",
      "itemName": "‡∏ó‡∏î‡∏™‡∏≠‡∏ö Item 1",
      "categoryId": "cat_test",
      "categoryName": "‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö",
      "totalQuantity": 20,
      "availableQuantity": 15,
      "userOwnedQuantity": 5,
      "isLowStock": false
    }
  ],
  "createdAt": "2025-11-03T02:44:20.953Z",
  "updatedAt": "2025-11-03T03:13:13.369Z"
}
```

## üé® ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô UI

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á)

```tsx
// ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà snapshot
{snapshot.itemDetails.map(item => (
  <div>
    <h3>{item.itemName}</h3>
    <p>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: {item.categoryName}</p>
    <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {item.totalQuantity}</p>
  </div>
))}
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)

```tsx
import { populateSnapshotItemNames } from '@/lib/snapshot-populate-helpers';

// Populate ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
const items = await populateSnapshotItemNames(snapshot.itemDetails);

{items.map(item => (
  <div>
    {/* ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ masterId) */}
    <h3>{item.currentItemName}</h3>
    
    {/* ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°‡∏ñ‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô */}
    {item.currentItemName !== item.itemName && (
      <p className="text-xs text-gray-500">
        ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°: {item.itemName}
      </p>
    )}
    
    <p>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: {item.categoryName}</p>
  </div>
))}
```

## üîÑ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Snapshot ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**Vercel Cron Job** (‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ 00:00):
```javascript
// vercel.json
{
  "crons": [
    {
      "path": "/api/admin/inventory-snapshot/auto-create",
      "schedule": "0 0 1 * *"
    }
  ]
}
```

**‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô**:
1. Cron job ‡∏£‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á snapshot ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö**‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤**
3. ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   - `masterId` ‡∏à‡∏≤‡∏Å InventoryMaster._id
   - `itemName` ‡∏à‡∏≤‡∏Å InventoryMaster.itemName
   - `categoryName` ‡∏à‡∏≤‡∏Å InventoryConfig (lookup ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
   - ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ï‡πà‡∏≤‡∏á‡πÜ

### 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Snapshot ‡πÅ‡∏ö‡∏ö Manual

```bash
# ‡πÉ‡∏ä‡πâ API (‡∏ï‡πâ‡∏≠‡∏á login ‡πÄ‡∏õ‡πá‡∏ô admin)
POST /api/admin/inventory-snapshot/create?year=2568&month=10

# ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ auto-create API (‡πÉ‡∏ä‡πâ secret key)
POST /api/admin/inventory-snapshot/auto-create?secret=YOUR_SECRET_KEY&month=10&year=2568
```

### 3. ‡∏î‡∏π Snapshot

```typescript
// ‡∏î‡∏∂‡∏á snapshot ‡∏à‡∏≤‡∏Å database
const snapshot = await InventorySnapshot.findOne({ 
  year: 2568, 
  month: 10 
});

// ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á)
console.log(snapshot.itemDetails[0].itemName);
console.log(snapshot.itemDetails[0].categoryName);
```

## üõ°Ô∏è ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ

1. **Self-Contained**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
2. **Immutable History**: ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
3. **Deletion-Safe**: ‡∏•‡∏ö master ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ
4. **Rename-Safe**: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏î‡πâ
5. **Flexible**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ

### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á

1. **‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ
2. **Consistency**: snapshot = ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏≠‡∏¢‡πà‡∏≤‡πÅ‡∏Å‡πâ snapshot ‡πÄ‡∏Å‡πà‡∏≤
3. **Backward Compatibility**: snapshot ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ `categoryName` ‡∏à‡∏∞ fallback ‡πÄ‡∏õ‡πá‡∏ô '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'

## üìù Checklist ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

- [x] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `SNAPSHOT_SECRET_KEY` ‡πÉ‡∏ô `.env.local`
- [x] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VERCEL_SNAPSHOT_SECRET_KEY` ‡πÉ‡∏ô Vercel Dashboard (‡∏ñ‡πâ‡∏≤ deploy ‡∏ö‡∏ô Vercel)
- [x] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Vercel Cron Job ‡πÉ‡∏ô `vercel.json`
- [x] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á snapshot ‡∏î‡πâ‡∏ß‡∏¢ `node test-snapshot-creation.js`
- [ ] ‡∏£‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π cron job ‡∏£‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö snapshot ‡πÉ‡∏ô MongoDB Compass
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Vercel Cron Logs (‡∏ñ‡πâ‡∏≤ deploy ‡∏ö‡∏ô Vercel)

## üéØ ‡∏™‡∏£‡∏∏‡∏õ

**‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°**: ‡∏ñ‡πâ‡∏≤‡∏•‡∏ö item ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ snapshot ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?

**‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö**:
1. ‚úÖ **‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô**: Re-snapshot ‡∏à‡∏∞‡∏ó‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏° (‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà)
2. ‚úÖ **‡∏Ñ‡∏ô‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô**: ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô snapshot ‡πÄ‡∏Å‡πà‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö
3. ‚úÖ **‡∏•‡∏ö item**: snapshot ‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å `itemName` ‡πÅ‡∏•‡∏∞ `categoryName` ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ
4. ‚úÖ **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠**: ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠ ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå)
5. ‚úÖ **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï**: ‡∏°‡∏µ `masterId` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö lookup ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏°‡∏µ helper function ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö**:
- `masterId` - ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á InventoryMaster (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö lookup ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)
- `itemName` - ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå)
- `categoryName` - ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå)

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**:
- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠
- ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÑ‡∏ß‡πâ
- ‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ

