# 📧 คู่มือระบบอีเมลแจ้งงาน IT

## 📋 สารบัญ

1. [ภาพรวมการเปลี่ยนแปลง](#ภาพรวมการเปลี่ยนแปลง)
2. [ตารางสรุปการส่งอีเมล](#-ตารางสรุปการส่งอีเมล)
3. [การเปลี่ยนแปลงแต่ละขั้นตอน](#-การเปลี่ยนแปลงแต่ละขั้นตอน)
4. [ตัวอย่างอีเมลแต่ละขั้นตอน](#-ตัวอย่างอีเมลแต่ละขั้นตอน)
5. [คุณสมบัติการออกแบบ](#-คุณสมบัติการออกแบบอีเมล)
6. [ไฟล์ที่แก้ไข](#-ไฟล์ที่แก้ไข)
7. [วิธีการทดสอบ](#-วิธีการทดสอบ)

---

## ภาพรวมการเปลี่ยนแปลง

ปรับปรุงระบบอีเมลแจ้งงาน IT ให้ **ส่งอีเมลไปยังทั้ง IT Admin และผู้แจ้งในทุกขั้นตอน** พร้อมปรับรูปแบบให้สวยงามและครบถ้วนเหมือนกัน

---

## 📊 ตารางสรุปการส่งอีเมล

| ขั้นตอน | ผู้ส่ง | ผู้รับ | Subject หลัก | สถานะใหม่ |
|---------|--------|--------|--------------|-----------|
| **1. แจ้งงาน** | VSQ IT Service Desk | **IT Admin + ผู้แจ้ง** | แจ้งงาน IT / ได้รับเรื่องแจ้งงาน | `pending` |
| **2. รับงาน** | VSQ IT Service Desk | **IT Admin + ผู้แจ้ง** | IT รับงานแล้ว | `in_progress` |
| **3. ส่งงาน** | VSQ IT Service Desk | **IT Admin + ผู้แจ้ง** | IT ส่งงานแล้ว - รอการตรวจสอบ | `completed` |
| **4a. อนุมัติ** | VSQ IT Service Desk | **IT Admin + ผู้แจ้ง** | IT อนุมัติงาน | `closed` |
| **4b. ส่งกลับ** | VSQ IT Service Desk | **IT Admin + ผู้แจ้ง** | ผู้แจ้งงาน IT ส่งงานกลับแก้ไข | `in_progress` |

---

## 🔄 การเปลี่ยนแปลงแต่ละขั้นตอน

### ✅ 1. แจ้งงาน IT (ไม่มีการเปลี่ยนแปลง)
**สถานะ:** ✅ ใช้งานได้ดีอยู่แล้ว

- ส่งอีเมล 2 ฉบับ:
  1. แจ้ง IT Admin (ทุกคน)
  2. ยืนยันให้ผู้แจ้ง
- รูปแบบสวยงามครบถ้วน

---

### 🔧 2. รับงาน (pending → in_progress)
**สถานะ:** ✨ **อัปเดตแล้ว**

#### การเปลี่ยนแปลง:
- **เดิม:** ส่งเฉพาะผู้แจ้ง
- **ใหม่:** ส่งถึง **ทั้งผู้แจ้งและ IT Admin ทุกคน**

#### คุณสมบัติ:
- **From:** `VSQ IT Service Desk <it@vsqclinic.com>`
- **Subject:** `แจ้งงาน IT VSQ [ด่วน/ปกติ] จาก [ชื่อ-นามสกุล] ([Issue ID]) - [หัวข้อ] : ✅ IT รับงานแล้ว`
- **เนื้อหา:**
  - Header สีเขียว: "✅ ทีม IT รับงานเรียบร้อยแล้ว"
  - Issue ID และวันที่แจ้ง
  - **👨‍💻 IT Admin ผู้รับผิดชอบ** (ชื่อและอีเมล)
  - ข้อมูลผู้แจ้งและรายละเอียดปัญหา
  - รูปภาพประกอบ (แนบในอีเมล)
  - ปุ่ม "ติดตามสถานะ" → `/it-tracking`

---

### 🎉 3. ส่งงาน (in_progress → completed)
**สถานะ:** ✨ **อัปเดตแล้ว**

#### การเปลี่ยนแปลง:
- **เดิม:** ส่งเฉพาะผู้แจ้ง + รูปแบบเก่า
- **ใหม่:** ส่งถึง **ทั้งผู้แจ้งและ IT Admin ทุกคน** + รูปแบบใหม่สวยงาม

#### คุณสมบัติ:
- **From:** `VSQ IT Service Desk <it@vsqclinic.com>`
- **Subject:** `แจ้งงาน IT VSQ [ด่วน/ปกติ] จาก [ชื่อ-นามสกุล] ([Issue ID]) - [หัวข้อ] : 🎉 IT ส่งงานแล้ว - รอการตรวจสอบ`
- **เนื้อหา:**
  - Header สีส้ม (Gradient): "🎉 ทีม IT ส่งงานเรียบร้อยแล้ว"
  - Issue ID, วันที่แจ้ง, **วันที่ส่งงาน**
  - สถานะ: "⏳ รอผู้ใช้ตรวจสอบ"
  - IT Admin ผู้รับผิดชอบ
  - ข้อมูลผู้แจ้งและรายละเอียดปัญหา
  - รูปภาพประกอบ (แนบในอีเมล)
  - **ปุ่มใหญ่สีขาว:** "🔗 ตรวจสอบและยืนยันผลงาน" → `/it-tracking`

---

### ✅ 4a. อนุมัติงาน (completed → closed)
**สถานะ:** ✨ **อัปเดตแล้ว**

#### การเปลี่ยนแปลง:
- **เดิม:** ส่งเฉพาะ IT Admin + รูปแบบเก่า
- **ใหม่:** ส่งถึง **ทั้งผู้แจ้งและ IT Admin ทุกคน** + รูปแบบใหม่สวยงาม

#### คุณสมบัติ:
- **From:** `VSQ IT Service Desk <it@vsqclinic.com>`
- **Subject:** `แจ้งงาน IT VSQ [ด่วน/ปกติ] จาก [ชื่อ-นามสกุล] ([Issue ID]) - [หัวข้อ] : ✅ IT อนุมัติงาน`
- **เนื้อหา:**
  - Header สีเขียว (Gradient): "✅ ผู้ใช้อนุมัติงานเรียบร้อย"
  - Issue ID, วันที่แจ้ง, **วันที่ตรวจสอบ**
  - สถานะ: "✅ ปิดงานเรียบร้อย"
  - **📋 ผลการตรวจสอบ: อนุมัติ** (พื้นหลังสีเขียว)
  - ข้อความจากผู้ใช้ (เหตุผลที่อนุมัติ)
  - IT Admin ผู้รับผิดชอบ
  - ข้อมูลผู้แจ้งและรายละเอียดปัญหา
  - รูปภาพประกอบ (แนบในอีเมล)
  - **กล่องข้อความสีเขียว:** "🎉 งานเสร็จสิ้นเรียบร้อย"

---

### 🔄 4b. ส่งกลับแก้ไข (completed → in_progress)
**สถานะ:** ✨ **อัปเดตแล้ว**

#### การเปลี่ยนแปลง:
- **เดิม:** ส่งเฉพาะ IT Admin + รูปแบบเก่า
- **ใหม่:** ส่งถึง **ทั้งผู้แจ้งและ IT Admin ทุกคน** + รูปแบบใหม่สวยงาม

#### คุณสมบัติ:
- **From:** `VSQ IT Service Desk <it@vsqclinic.com>`
- **Subject:** `แจ้งงาน IT VSQ [ด่วน/ปกติ] จาก [ชื่อ-นามสกุล] ([Issue ID]) - [หัวข้อ] : 🔄 ผู้แจ้งงาน IT ส่งงานกลับแก้ไข`
- **เนื้อหา:**
  - Header สีแดง (Gradient): "🔄 ผู้ใช้ส่งกลับให้แก้ไข"
  - Issue ID, วันที่แจ้ง, **วันที่ตรวจสอบ**
  - สถานะ: "🔄 กำลังดำเนินการ"
  - **📋 ผลการตรวจสอบ: ส่งกลับแก้ไข** (พื้นหลังสีแดง)
  - เหตุผลที่ไม่อนุมัติ
  - IT Admin ผู้รับผิดชอบ
  - ข้อมูลผู้แจ้งและรายละเอียดปัญหา
  - รูปภาพประกอบ (แนบในอีเมล)
  - **ปุ่มสีส้ม:** "🔗 เข้าสู่ระบบ IT Admin" → `/admin/it-reports`

---

## 📧 ตัวอย่างอีเมลแต่ละขั้นตอน

### 1️⃣ ขั้นตอนที่ 1: แจ้งงาน IT (ส่ง 2 ฉบับ)

#### 📨 อีเมลที่ 1.1: แจ้ง IT Admin

```
From: VSQ IT Service Desk <it@vsqclinic.com>
Reply-To: somchai.jaidee@vsqclinic.com (อีเมลผู้แจ้ง)
To: itadmin1@vsqclinic.com
Subject: แจ้งงาน IT VSQ [ด่วน] จาก สมชาย ใจดี (IT-2025-0001) - ปัญหา Internet

เนื้อหา:
┌─────────────────────────────────────────────────────┐
│  🔔 แจ้งปัญหาด้าน IT                                  │
│  (Header สีม่วง Gradient)                             │
└─────────────────────────────────────────────────────┘

📋 Issue ID: IT-2025-0001
📅 วันที่แจ้ง: 14 ตุลาคม 2568 เวลา 10:30 น.
📊 สถานะปัจจุบัน: ⏳ รอดำเนินการ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👤 ข้อมูลผู้แจ้ง
├─ ชื่อ-นามสกุล: สมชาย ใจดี (ชาย)
├─ แผนก: IT
├─ ออฟฟิศ/สาขา: สำนักงานใหญ่
├─ เบอร์โทร: 081-234-5678
└─ อีเมล: somchai.jaidee@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 รายละเอียดปัญหา
├─ ประเภทปัญหา: ปัญหา Internet
├─ ความเร่งด่วน: 🔴 ด่วนมาก
└─ รายละเอียด:
   อินเทอร์เน็ตขาดหายบ่อย ไม่สามารถทำงานได้
   กรุณาเข้ามาตรวจสอบด่วน

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📷 รูปภาพประกอบ (2 รูป)
[รูปภาพที่ 1] [รูปภาพที่ 2]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 ดำเนินการรับงาน
คลิกปุ่มด้านล่างเพื่อเข้าสู่ระบบและรับงานนี้

[🔗 เข้าสู่ระบบ IT Admin]
```

---

#### 📨 อีเมลที่ 1.2: ยืนยันให้ผู้แจ้ง

```
From: VSQ IT Service Desk <it@vsqclinic.com>
To: somchai.jaidee@vsqclinic.com
Subject: ✅ ได้รับเรื่องแจ้งงาน IT VSQ [ด่วน] - IT-2025-0001

เนื้อหา:
┌─────────────────────────────────────────────────────┐
│  ✅ ระบบได้รับเรื่องแจ้งปัญหาแล้ว                      │
│  (Header สีเขียว Gradient)                            │
└─────────────────────────────────────────────────────┘

ขอบคุณที่แจ้งปัญหา
ทีม IT จะดำเนินการตรวจสอบและติดต่อกลับโดยเร็วที่สุด

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 Issue ID: IT-2025-0001
📅 วันที่แจ้ง: 14 ตุลาคม 2568 เวลา 10:30 น.
📊 สถานะปัจจุบัน: ⏳ รอดำเนินการ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ข้อมูลผู้แจ้งและรายละเอียดปัญหาเหมือนกับอีเมลที่ 1.1]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 ติดตามสถานะงาน
คุณสามารถติดตามสถานะการดำเนินงานได้ตลอดเวลา

[🔍 ติดตามสถานะ]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📌 หมายเหตุ:
• ทีม IT จะติดต่อกลับหากต้องการข้อมูลเพิ่มเติม
• คุณจะได้รับอีเมลแจ้งเตือนเมื่อทีม IT รับงานและส่งงาน
• กรุณาเก็บ Issue ID ไว้เพื่อใช้ในการติดตามงาน
```

---

### 2️⃣ ขั้นตอนที่ 2: แอดมินรับงาน (pending → in_progress)

#### 📨 ส่งถึง: IT Admin ทุกคน + ผู้แจ้ง

```
From: VSQ IT Service Desk <it@vsqclinic.com>
To: somchai.jaidee@vsqclinic.com, itadmin1@vsqclinic.com, itadmin2@vsqclinic.com
Subject: แจ้งงาน IT VSQ [ด่วน] จาก สมชาย ใจดี (IT-2025-0001) - ปัญหา Internet : ✅ IT รับงานแล้ว

เนื้อหา:
┌─────────────────────────────────────────────────────┐
│  ✅ ทีม IT รับงานเรียบร้อยแล้ว                         │
│  (Header สีเขียว Gradient)                            │
└─────────────────────────────────────────────────────┘

📋 Issue ID: IT-2025-0001
📅 วันที่แจ้ง: 14 ตุลาคม 2568 เวลา 10:30 น.
📊 สถานะปัจจุบัน: 🔧 กำลังดำเนินการ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👨‍💻 IT Admin ผู้รับผิดชอบ
├─ ชื่อ: สมศักดิ์ เทคนิค
└─ อีเมล: somsak.tech@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👤 ข้อมูลผู้แจ้ง
├─ ชื่อ-นามสกุล: สมชาย ใจดี (ชาย)
├─ แผนก: IT
├─ ออฟฟิศ/สาขา: สำนักงานใหญ่
├─ เบอร์โทร: 081-234-5678
└─ อีเมล: somchai.jaidee@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 รายละเอียดปัญหา
├─ ประเภทปัญหา: ปัญหา Internet
├─ ความเร่งด่วน: 🔴 ด่วนมาก
└─ รายละเอียด:
   อินเทอร์เน็ตขาดหายบ่อย ไม่สามารถทำงานได้
   กรุณาเข้ามาตรวจสอบด่วน

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📷 รูปภาพประกอบ (2 รูป)
[รูปภาพที่ 1] [รูปภาพที่ 2]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⏳ ขั้นตอนถัดไป
ทีม IT กำลังดำเนินการแก้ไขปัญหา
คุณสามารถติดตามสถานะได้ที่:

[📊 ติดตามสถานะ]
```

---

### 3️⃣ ขั้นตอนที่ 3: แอดมินส่งงาน (in_progress → completed)

#### 📨 ส่งถึง: IT Admin ทุกคน + ผู้แจ้ง

```
From: VSQ IT Service Desk <it@vsqclinic.com>
To: somchai.jaidee@vsqclinic.com, itadmin1@vsqclinic.com, itadmin2@vsqclinic.com
Subject: แจ้งงาน IT VSQ [ด่วน] จาก สมชาย ใจดี (IT-2025-0001) - ปัญหา Internet : 🎉 IT ส่งงานแล้ว - รอการตรวจสอบ

เนื้อหา:
┌─────────────────────────────────────────────────────┐
│  🎉 ทีม IT ส่งงานเรียบร้อยแล้ว                         │
│  (Header สีส้ม Gradient)                              │
└─────────────────────────────────────────────────────┘

📋 Issue ID: IT-2025-0001
📅 วันที่แจ้ง: 14 ตุลาคม 2568 เวลา 10:30 น.
🕐 ส่งงานเมื่อ: 14 ตุลาคม 2568 เวลา 14:45 น.
📊 สถานะปัจจุบัน: ⏳ รอผู้ใช้ตรวจสอบ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👨‍💻 IT Admin ผู้รับผิดชอบ
├─ ชื่อ: สมศักดิ์ เทคนิค
└─ อีเมล: somsak.tech@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👤 ข้อมูลผู้แจ้ง
├─ ชื่อ-นามสกุล: สมชาย ใจดี (ชาย)
├─ แผนก: IT
├─ ออฟฟิศ/สาขา: สำนักงานใหญ่
├─ เบอร์โทร: 081-234-5678
└─ อีเมล: somchai.jaidee@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 รายละเอียดปัญหา
├─ ประเภทปัญหา: ปัญหา Internet
├─ ความเร่งด่วน: 🔴 ด่วนมาก
└─ รายละเอียด:
   อินเทอร์เน็ตขาดหายบ่อย ไม่สามารถทำงานได้
   กรุณาเข้ามาตรวจสอบด่วน

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📷 รูปภาพประกอบ (2 รูป)
[รูปภาพที่ 1] [รูปภาพที่ 2]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔍 ต้องการตรวจสอบผลงาน
กรุณาคลิกปุ่มด้านล่างเพื่อตรวจสอบและยืนยันผลงาน

[🔗 ตรวจสอบและยืนยันผลงาน]
(ปุ่มสีขาวใหญ่บนพื้นส้ม)
```

---

### 4️⃣ ขั้นตอนที่ 4a: ผู้แจ้งอนุมัติงาน (completed → closed)

#### 📨 ส่งถึง: IT Admin ทุกคน + ผู้แจ้ง

```
From: VSQ IT Service Desk <it@vsqclinic.com>
To: somchai.jaidee@vsqclinic.com, itadmin1@vsqclinic.com, itadmin2@vsqclinic.com
Subject: แจ้งงาน IT VSQ [ด่วน] จาก สมชาย ใจดี (IT-2025-0001) - ปัญหา Internet : ✅ IT อนุมัติงาน

เนื้อหา:
┌─────────────────────────────────────────────────────┐
│  ✅ ผู้ใช้อนุมัติงานเรียบร้อย                          │
│  (Header สีเขียว Gradient)                            │
└─────────────────────────────────────────────────────┘

📋 Issue ID: IT-2025-0001
📅 วันที่แจ้ง: 14 ตุลาคม 2568 เวลา 10:30 น.
🕐 ตรวจสอบเมื่อ: 14 ตุลาคม 2568 เวลา 15:20 น.
📊 สถานะปัจจุบัน: ✅ ปิดงานเรียบร้อย

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ ผลการตรวจสอบ: อนุมัติ
(กล่องสีเขียว)

ข้อความจากผู้ใช้:
ขอบคุณมากครับ แก้ไขปัญหาได้แล้ว
อินเทอร์เน็ตกลับมาเป็นปกติ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👨‍💻 IT Admin ผู้รับผิดชอบ
├─ ชื่อ: สมศักดิ์ เทคนิค
└─ อีเมล: somsak.tech@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👤 ข้อมูลผู้แจ้ง
├─ ชื่อ-นามสกุล: สมชาย ใจดี (ชาย)
├─ แผนก: IT
├─ ออฟฟิศ/สาขา: สำนักงานใหญ่
├─ เบอร์โทร: 081-234-5678
└─ อีเมล: somchai.jaidee@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 รายละเอียดปัญหา
├─ ประเภทปัญหา: ปัญหา Internet
├─ ความเร่งด่วน: 🔴 ด่วนมาก
└─ รายละเอียด:
   อินเทอร์เน็ตขาดหายบ่อย ไม่สามารถทำงานได้
   กรุณาเข้ามาตรวจสอบด่วน

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📷 รูปภาพประกอบ (2 รูป)
[รูปภาพที่ 1] [รูปภาพที่ 2]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎉 งานเสร็จสิ้นเรียบร้อย
ผู้ใช้อนุมัติงานแล้ว งานนี้ได้ปิดเรียบร้อยแล้ว
(กล่องสีเขียว Gradient)
```

---

### 5️⃣ ขั้นตอนที่ 4b: ผู้แจ้งส่งกลับแก้ไข (completed → in_progress)

#### 📨 ส่งถึง: IT Admin ทุกคน + ผู้แจ้ง

```
From: VSQ IT Service Desk <it@vsqclinic.com>
To: somchai.jaidee@vsqclinic.com, itadmin1@vsqclinic.com, itadmin2@vsqclinic.com
Subject: แจ้งงาน IT VSQ [ด่วน] จาก สมชาย ใจดี (IT-2025-0001) - ปัญหา Internet : 🔄 ผู้แจ้งงาน IT ส่งงานกลับแก้ไข

เนื้อหา:
┌─────────────────────────────────────────────────────┐
│  🔄 ผู้ใช้ส่งกลับให้แก้ไข                             │
│  (Header สีแดง Gradient)                              │
└─────────────────────────────────────────────────────┘

📋 Issue ID: IT-2025-0001
📅 วันที่แจ้ง: 14 ตุลาคม 2568 เวลา 10:30 น.
🕐 ตรวจสอบเมื่อ: 14 ตุลาคม 2568 เวลา 15:20 น.
📊 สถานะปัจจุบัน: 🔄 กำลังดำเนินการ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔄 ผลการตรวจสอบ: ส่งกลับแก้ไข
(กล่องสีแดง)

เหตุผลที่ไม่อนุมัติ:
ปัญหายังไม่หายครับ อินเทอร์เน็ตยังขาดหายบ่อย
กรุณาตรวจสอบอีกครั้ง

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👨‍💻 IT Admin ผู้รับผิดชอบ
├─ ชื่อ: สมศักดิ์ เทคนิค
└─ อีเมล: somsak.tech@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

👤 ข้อมูลผู้แจ้ง
├─ ชื่อ-นามสกุล: สมชาย ใจดี (ชาย)
├─ แผนก: IT
├─ ออฟฟิศ/สาขา: สำนักงานใหญ่
├─ เบอร์โทร: 081-234-5678
└─ อีเมล: somchai.jaidee@vsqclinic.com

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 รายละเอียดปัญหา
├─ ประเภทปัญหา: ปัญหา Internet
├─ ความเร่งด่วน: 🔴 ด่วนมาก
└─ รายละเอียด:
   อินเทอร์เน็ตขาดหายบ่อย ไม่สามารถทำงานได้
   กรุณาเข้ามาตรวจสอบด่วน

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📷 รูปภาพประกอบ (2 รูป)
[รูปภาพที่ 1] [รูปภาพที่ 2]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 ต้องการดำเนินการ
งานถูกส่งกลับให้แก้ไข
กรุณาเข้าสู่ระบบเพื่อดำเนินการต่อ

[🔗 เข้าสู่ระบบ IT Admin]
(ปุ่มสีขาวบนพื้นส้ม)
```

---

## 📊 สรุปการส่งอีเมล

| ขั้นตอน | จำนวนอีเมล | ผู้รับ | สี Header |
|---------|------------|--------|-----------|
| 1. แจ้งงาน | 2 ฉบับ | IT Admin (แยก) + ผู้แจ้ง | สีม่วง + สีเขียว |
| 2. รับงาน | 1 ฉบับ (ส่งหลายคน) | IT Admin ทุกคน + ผู้แจ้ง | สีเขียว |
| 3. ส่งงาน | 1 ฉบับ (ส่งหลายคน) | IT Admin ทุกคน + ผู้แจ้ง | สีส้ม |
| 4a. อนุมัติ | 1 ฉบับ (ส่งหลายคน) | IT Admin ทุกคน + ผู้แจ้ง | สีเขียว |
| 4b. ส่งกลับ | 1 ฉบับ (ส่งหลายคน) | IT Admin ทุกคน + ผู้แจ้ง | สีแดง |

---

## 🎨 คุณสมบัติการออกแบบอีเมล

### ✨ รูปแบบที่เหมือนกันทุกขั้นตอน:

1. **Header Gradient สวยงาม**
   - ขั้นตอนที่ 1: สีม่วง (แจ้งงาน)
   - ขั้นตอนที่ 2: สีเขียว (รับงาน)
   - ขั้นตอนที่ 3: สีส้ม (ส่งงาน)
   - ขั้นตอนที่ 4a: สีเขียว (อนุมัติ)
   - ขั้นตอนที่ 4b: สีแดง (ส่งกลับ)

2. **กล่องข้อมูล Issue ID**
   - Issue ID เด่นชัด
   - วันที่แจ้งและวันที่อัปเดต
   - Badge สถานะปัจจุบัน

3. **ส่วนข้อมูลครบถ้วน**
   - 👨‍💻 IT Admin ผู้รับผิดชอบ (ถ้ามี)
   - 👤 ข้อมูลผู้แจ้ง (ชื่อ, แผนก, สาขา, เบอร์, อีเมล)
   - 🔧 รายละเอียดปัญหา (ประเภท, ความเร่งด่วน, รายละเอียด, หมายเหตุ)
   - 📷 รูปภาพประกอบ (แนบในอีเมล พร้อมแสดงในเนื้อหา)

4. **ปุ่ม Call-to-Action**
   - ปุ่มใหญ่ Gradient สวยงาม
   - ข้อความชัดเจนตามบริบท
   - ลิงก์ไปยังหน้าที่เหมาะสม

5. **Footer มาตรฐาน**
   - ข้อความจากระบบ Inventory Management Dashboard

### 🎨 สีประจำขั้นตอน

```
ขั้นตอนที่ 1 (แจ้งงาน):
├─ อีเมลแจ้ง IT Admin:  #667eea → #764ba2 (สีม่วง Gradient)
└─ อีเมลยืนยันผู้แจ้ง:  #4caf50 → #2e7d32 (สีเขียว Gradient)

ขั้นตอนที่ 2 (รับงาน):   #4caf50 → #2e7d32 (สีเขียว Gradient)
ขั้นตอนที่ 3 (ส่งงาน):   #ff9800 → #f57c00 (สีส้ม Gradient)
ขั้นตอนที่ 4a (อนุมัติ):  #4caf50 → #2e7d32 (สีเขียว Gradient)
ขั้นตอนที่ 4b (ส่งกลับ):  #f44336 → #c62828 (สีแดง Gradient)
```

### ✅ คุณสมบัติพิเศษ

1. **รูปภาพแนบในอีเมล**
   - ทุกอีเมลแนบรูปภาพที่ผู้แจ้งส่งมา
   - แสดงรูปในเนื้อหาอีเมลด้วย (Embedded Images)

2. **ข้อมูลครบถ้วน**
   - ทุกอีเมลมีข้อมูลครบถ้วน
   - ไม่ต้องกลับไปดูอีเมลเดิม

3. **ปุ่ม Call-to-Action ชัดเจน**
   - แต่ละขั้นตอนมีปุ่มที่เหมาะสม
   - ลิงก์ไปยังหน้าที่ถูกต้อง

4. **รูปแบบสม่ำเสมอ**
   - ทุกอีเมลใช้รูปแบบเดียวกัน
   - ง่ายต่อการอ่านและทำความเข้าใจ

---

## 📝 ไฟล์ที่แก้ไข

### `src/lib/email.ts`

#### ฟังก์ชันที่แก้ไข:

1. ✅ **`sendIssueNotification`** - ไม่มีการเปลี่ยนแปลง (ใช้งานได้ดีอยู่แล้ว)
2. ✅ **`sendIssueConfirmationToReporter`** - ไม่มีการเปลี่ยนแปลง (ใช้งานได้ดีอยู่แล้ว)
3. ✨ **`sendJobAcceptedNotification`** - อัปเดตเป็นส่งถึงทั้ง IT Admin และผู้แจ้ง
4. ✨ **`sendWorkCompletedNotification`** - อัปเดตเป็นส่งถึงทั้ง IT Admin และผู้แจ้ง + รูปแบบใหม่
5. ✨ **`sendUserApprovalNotification`** - อัปเดตเป็นส่งถึงทั้ง IT Admin และผู้แจ้ง + รูปแบบใหม่

---

## 🚀 ผลลัพธ์

### ✅ ข้อดีของการอัปเดต:

1. **ทุกคนได้รับข้อมูลเท่าเทียมกัน**
   - IT Admin และผู้แจ้งจะได้รับอีเมลเหมือนกันในทุกขั้นตอน
   - ไม่มีการพลาดข้อมูลสำคัญ

2. **ความสม่ำเสมอในการออกแบบ**
   - รูปแบบสวยงามและเป็นมาตรฐานเดียวกันทุกอีเมล
   - ง่ายต่อการอ่านและทำความเข้าใจ

3. **ข้อมูลครบถ้วน**
   - ทุกอีเมลมีข้อมูลครบถ้วน: Issue ID, ผู้แจ้ง, IT Admin, รายละเอียดปัญหา, รูปภาพ
   - ไม่ต้องกลับไปหาอีเมลเดิม

4. **การติดตามงานง่ายขึ้น**
   - ทุกฝ่ายสามารถติดตามสถานะได้จากอีเมล
   - มีปุ่มลิงก์ชัดเจนในทุกขั้นตอน

5. **รูปภาพแนบมาในอีเมล**
   - ทุกอีเมลแนบรูปภาพที่ผู้แจ้งส่งมา
   - สามารถดูรูปได้โดยไม่ต้องเข้าระบบ

---

## 📌 หมายเหตุสำคัญ

- ✅ ตรวจสอบแล้วไม่มี Linter Errors
- ✅ รองรับทุกขั้นตอนของระบบแจ้งงาน IT
- ✅ ส่งอีเมลไปยัง IT Admin ทุกคน + ผู้แจ้ง
- ✅ รูปแบบสวยงามและสม่ำเสมอทุกอีเมล
- ✅ Subject ชัดเจน มี Issue ID และสถานะ

---

## 🎯 วิธีการทดสอบ

1. **แจ้งงาน IT ใหม่**
   - ตรวจสอบว่า IT Admin และผู้แจ้งได้รับอีเมล

2. **รับงาน**
   - ตรวจสอบว่า IT Admin ทุกคนและผู้แจ้งได้รับอีเมล

3. **ส่งงาน**
   - ตรวจสอบว่า IT Admin ทุกคนและผู้แจ้งได้รับอีเมล

4. **อนุมัติงาน**
   - ตรวจสอบว่า IT Admin ทุกคนและผู้แจ้งได้รับอีเมลสีเขียว

5. **ส่งกลับแก้ไข**
   - ตรวจสอบว่า IT Admin ทุกคนและผู้แจ้งได้รับอีเมลสีแดง

---

**อัปเดตเมื่อ:** 14 ตุลาคม 2568  
**ผู้อัปเดต:** AI Assistant  
**สถานะ:** ✅ พร้อมใช้งาน

**หมายเหตุ:** ตัวอย่างอีเมลข้างต้นเป็นเพียงโครงสร้างหลัก อีเมลจริงจะมี HTML สวยงามพร้อม Gradient, Icons, และรูปแบบที่ทันสมัย

